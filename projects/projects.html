<!DOCTYPE html>
<html lang='no'>
<head id="general">
        <link rel="stylesheet" href="../styles/menu_styles.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<head>
    <style>
        .hide {
            display: none;
        }
        .show {
            display: block;
        }

        .tag-button.show {
            display: inline;
        }

        button.active {
          background-color: rgb(57, 201, 79);
        }

        .preview {
            font-size: small;
            text-decoration: none;
            text-align: center;
            width: 200px;
            border: 1pt solid gray;
            margin: 5px;
            padding: 5px;
            overflow: auto;
        }
        .preview.show {
          display: inline-block;
        }
    .preview:hover {
      background-color: bisque;
    }

    .preview-tag {
      padding: 0px 5px 0px 4px;
      display: inline-block;
      height: 20px;
      font-size: 14px;
      border-radius: 100px;
      background-color: rgb(64, 229, 229);
      margin-bottom: 2px;
      margin-left: 2px;
    }
    .preview-grade {
      padding: 5px;
      margin-left: 5px;
      height: 20px;
      background-color: rgba(243, 153, 74, 0.664);
    }

    #projects-filter {
      padding-bottom: 5px;
      border-top: 1pt solid black;
      border-bottom: 1pt solid black;
    }

    #grades-filter {
      padding-bottom: 5px;
      border-bottom: 1pt solid black;
    }
    #grades-filter button {
      margin-top: 5px;
      margin-left: 5px;
    }
    #tags-filter {
      padding-bottom: 5px;
      border-bottom: 1pt solid black;
    }
    #tags-filter button {
      margin-top: 5px;
      margin-left: 5px;
    }
    </style>
</head>


<div id="menu">
      <a href="/index.html" class="menu-button" id="index-link">Om</a>
      <a href="/books/books.html" class="menu-button" id="books-link">Bøker</a>
      <a href="/corruculum/corruculum.html" class="menu-button" id="curriculum-link">Pensum</a>
      <a href="/exams/exams.html" class="menu-button" id="exams-link">Eksamener</a>
      <a href="/projects/projects.html" class="menu-button" id="projects-link">Ressursbank</a>
      <a href="/skilltraining/skilltraining.html" class="menu-button" id="projects-link">Ferdighetstrening</a>
      <span id="project-title">OPENMATHBOOKS</span>
      <button id="menu-icon">
        Meny
      </button>
    </div>

<div id="main">
<div id="start-container">
<div id="info">
  <h1>Ressursbank</h1>
  Her finner du oppgaver og undervisningsoppleg som oppfyller <br> minst ett av disse kriteriene:
  <ul>
    <li>Kombinerer flere temaer</li>
    <li>Legger opp til utforsking</li>
    <li>Viser praktisk anvendelse av matematikk</li>
    <li>Er eksamensrelaterte</li>
  </ul>
  <p>
    Vær spesielt oppmerksom på oppgaver tagget med ''utforsking". Disse oppgavene er ment
    for at leseren skal fordype seg i sentrale tema. De egner seg godt til å diskuteres i grupper, men man kan også løse
    oppgavene på egenhånd.
  </p>
</div>
<div id="filter-container">
  <div id="projects-filter">
    <button data-type="task">Oppgave</button>
    <button data-type="teaching">Undervisningsopplegg</button>
  </div>
  <div id="grades-filter"><button class="grade-button" data-grade="5">5</button> 
<button class="grade-button" data-grade="6">6</button> 
<button class="grade-button" data-grade="7">7</button> 
<button class="grade-button" data-grade="8">8</button> 
<button class="grade-button" data-grade="9">9</button> 
<button class="grade-button" data-grade="10">10</button> 
<button class="grade-button" data-grade="1P">1P</button> 
<button class="grade-button" data-grade="1T">1T</button> 
<button class="grade-button" data-grade="2P">2P</button> 
<button class="grade-button" data-grade="R1">R1</button> 
<button class="grade-button" data-grade="R2">R2</button> 
</div>
  <div id="tags-filter"><button class="tag-button hide" data-tag="andregradsfunksjon">andregradsfunksjon</button> 
<button class="tag-button hide" data-tag="symmetri">symmetri</button> 
<button class="tag-button hide" data-tag="utforsking">utforsking</button> 
<button class="tag-button hide" data-tag="utfordring">utfordring</button> 
<button class="tag-button hide" data-tag="overslag">overslag</button> 
<button class="tag-button hide" data-tag="proporsjonalitet">proporsjonalitet</button> 
<button class="tag-button hide" data-tag="omkrets">omkrets</button> 
<button class="tag-button hide" data-tag="generalisering">generalisering</button> 
<button class="tag-button hide" data-tag="samarbeid">samarbeid</button> 
<button class="tag-button hide" data-tag="andregrad">andregrad</button> 
<button class="tag-button hide" data-tag="funksjoner">funksjoner</button> 
<button class="tag-button hide" data-tag="algebra">algebra</button> 
<button class="tag-button hide" data-tag="areal">areal</button> 
<button class="tag-button hide" data-tag="kvadratsetningene">kvadratsetningene</button> 
<button class="tag-button hide" data-tag="multiplikasjon">multiplikasjon</button> 
<button class="tag-button hide" data-tag="omgjøring av enheter">omgjøring av enheter</button> 
<button class="tag-button hide" data-tag="ute">ute</button> 
<button class="tag-button hide" data-tag="lek">lek</button> 
<button class="tag-button hide" data-tag="enheter">enheter</button> 
<button class="tag-button hide" data-tag="titallsystemet">titallsystemet</button> 
<button class="tag-button hide" data-tag="tallmønster">tallmønster</button> 
<button class="tag-button hide" data-tag="tallforståelse">tallforståelse</button> 
<button class="tag-button hide" data-tag="Pytagoras' setning">Pytagoras' setning</button> 
<button class="tag-button hide" data-tag="introduksjon til tema">introduksjon til tema</button> 
</div>
</div>
<div id="preview-container">
</div>
</div>

<div id="task-container">
    <a class="preview hide task" href="./tasks/secondorderfunctionadvanced-2/secondorderfunctionadvanced-2.html" data-id="secondorderfunctionadvanced-2">
    <h3>Andregradsfunksjonens symmetriegenskaper 2</h3>
    <p>
    <span class="preview-tag">andregradsfunksjon</span> 
<span class="preview-tag">symmetri</span> 
<span class="preview-tag">utforsking</span> 
<span class="preview-tag">utfordring</span> 

    </p>
    <p>
    <span class="preview-grade">1T</span> 

    </p>
    </a>
    
    <a class="preview hide task" href="./tasks/secondorderfunctionadvanced-1/secondorderfunctionadvanced-1.html" data-id="secondorderfunctionadvanced-1">
    <h3>Andregradsfunksjonens symmetriegenskaper 1</h3>
    <p>
    <span class="preview-tag">andregradsfunksjon</span> 
<span class="preview-tag">symmetri</span> 
<span class="preview-tag">utforsking</span> 
<span class="preview-tag">utfordring</span> 

    </p>
    <p>
    <span class="preview-grade">1T</span> 

    </p>
    </a>
    
    <a class="preview hide task" href="./tasks/thunderbolt/thunderbolt.html" data-id="thunderbolt">
    <h3>Lyn og torden</h3>
    <p>
    <span class="preview-tag">overslag</span> 
<span class="preview-tag">proporsjonalitet</span> 

    </p>
    <p>
    <span class="preview-grade">5</span> 
<span class="preview-grade">6</span> 
<span class="preview-grade">7</span> 
<span class="preview-grade">8</span> 
<span class="preview-grade">9</span> 
<span class="preview-grade">10</span> 
<span class="preview-grade">1P</span> 

    </p>
    </a>
    
    <a class="preview hide task" href="./tasks/pentas/pentas.html" data-id="pentas">
    <h3>Femkvadratformer</h3>
    <p>
    <span class="preview-tag">utforsking</span> 
<span class="preview-tag">omkrets</span> 
<span class="preview-tag">generalisering</span> 
<span class="preview-tag">samarbeid</span> 

    </p>
    <p>
    <span class="preview-grade">4</span> 
<span class="preview-grade">5</span> 
<span class="preview-grade">6</span> 

    </p>
    </a>
    
    <a class="preview hide task" href="./tasks/secondorderfunction/secondorderfunction.html" data-id="secondorderfunction">
    <h3>Andregradsunksjonen</h3>
    <p>
    <span class="preview-tag">andregrad</span> 
<span class="preview-tag">utforsking</span> 
<span class="preview-tag">funksjoner</span> 

    </p>
    <p>
    <span class="preview-grade">10</span> 
<span class="preview-grade">1P</span> 
<span class="preview-grade">1T</span> 

    </p>
    </a>
    
    <a class="preview hide task" href="./tasks/determinant/determinant.html" data-id="determinant">
    <h3>Parallellogram i et koordinatsystem</h3>
    <p>
    <span class="preview-tag">algebra</span> 
<span class="preview-tag">areal</span> 
<span class="preview-tag">utforsking</span> 

    </p>
    <p>
    <span class="preview-grade">9</span> 
<span class="preview-grade">10</span> 
<span class="preview-grade">1P</span> 
<span class="preview-grade">1T</span> 
<span class="preview-grade">R1</span> 

    </p>
    </a>
    
    <a class="preview hide task" href="./tasks/opgalgsquare/opgalgsquare.html" data-id="opgalgsquare">
    <h3>Kvadratsetningene</h3>
    <p>
    <span class="preview-tag">utforsking</span> 
<span class="preview-tag">algebra</span> 
<span class="preview-tag">kvadratsetningene</span> 
<span class="preview-tag">areal</span> 

    </p>
    <p>
    <span class="preview-grade">9</span> 
<span class="preview-grade">10</span> 
<span class="preview-grade">1T</span> 

    </p>
    </a>
    
    <a class="preview hide task" href="./tasks/areaandcircumferenceevenandodd/areaandcircumferenceevenandodd.html" data-id="areaandcircumferenceevenandodd">
    <h3>Areal og omkrets til rektangel</h3>
    <p>
    <span class="preview-tag">utforsking</span> 
<span class="preview-tag">areal</span> 
<span class="preview-tag">omkrets</span> 
<span class="preview-tag">multiplikasjon</span> 

    </p>
    <p>
    <span class="preview-grade">4</span> 
<span class="preview-grade">5</span> 
<span class="preview-grade">6</span> 

    </p>
    </a>
    
    <a class="preview hide task" href="./tasks/walkspeed/walkspeed.html" data-id="walkspeed">
    <h3>Gåfart</h3>
    <p>
    <span class="preview-tag">proporsjonalitet</span> 
<span class="preview-tag">omgjøring av enheter</span> 

    </p>
    <p>
    <span class="preview-grade">5</span> 
<span class="preview-grade">6</span> 
<span class="preview-grade">7</span> 
<span class="preview-grade">8</span> 
<span class="preview-grade">9</span> 
<span class="preview-grade">10</span> 
<span class="preview-grade">1P</span> 

    </p>
    </a>
    </div>
<div id="teaching-container">
    <a class="preview hide teaching" href="./teachings/kilosisten/kilosisten.html" data-id="kilosisten">
    <h3>Kilosisten</h3>
    <p>
    <span class="preview-tag">ute</span> 
<span class="preview-tag">lek</span> 
<span class="preview-tag">enheter</span> 

    </p>
    <p>
    <span class="preview-grade">4</span> 
<span class="preview-grade">5</span> 
<span class="preview-grade">6</span> 
<span class="preview-grade">7</span> 

    </p>
    </a>
    
    <a class="preview hide teaching" href="./teachings/guessthenumber/guessthenumber.html" data-id="guessthenumber">
    <h3>Gjett tallet</h3>
    <p>
    <span class="preview-tag">utforsking</span> 
<span class="preview-tag">titallsystemet</span> 
<span class="preview-tag">tallmønster</span> 
<span class="preview-tag">tallforståelse</span> 

    </p>
    <p>
    <span class="preview-grade">1</span> 
<span class="preview-grade">2</span> 

    </p>
    </a>
    
    <a class="preview hide teaching" href="./teachings/timestablecoloring/timestablecoloring.html" data-id="timestablecoloring">
    <h3>Fargelegg gangetabeller</h3>
    <p>
    <span class="preview-tag">utforsking</span> 
<span class="preview-tag">multiplikasjon</span> 

    </p>
    <p>
    <span class="preview-grade">3</span> 
<span class="preview-grade">4</span> 
<span class="preview-grade">5</span> 

    </p>
    </a>
    
    <a class="preview hide teaching" href="./teachings/pythagoras/pythagoras.html" data-id="pythagoras">
    <h3>Pytagoras' setning</h3>
    <p>
    <span class="preview-tag">utforsking</span> 
<span class="preview-tag">Pytagoras' setning</span> 
<span class="preview-tag">algebra</span> 
<span class="preview-tag">introduksjon til tema</span> 

    </p>
    <p>
    <span class="preview-grade">7</span> 
<span class="preview-grade">8</span> 

    </p>
    </a>
    </div>
</div>
<script type="module">
    import {allTags, tagIndex, previewIndex} from "./tags.js"
    const projectsFilterButtons = document.getElementById("projects-filter").getElementsByTagName("button")
    
    for(let projectsFilterButton of projectsFilterButtons) {
        projectsFilterButton.addEventListener("click", filterProjects)
    }
    
    for(let tag of Object.keys(tagIndex)) {
        tagIndex[tag]["types"] = new Set(tagIndex[tag]["types"])
        tagIndex[tag]["grades"] = new Set(tagIndex[tag]["grades"])
    }

    for(let id of Object.keys(previewIndex)) {
      previewIndex[id]["type"] = new Set(previewIndex[id]["type"])
      previewIndex[id]["tags"] = new Set(previewIndex[id]["tags"])
      previewIndex[id]["grades"] = new Set(previewIndex[id]["grades"])
    }
    
    let filter = {
    "types": new Set,
    "grades": new Set,
    "tags": new Set,
    }

    const tagButtons = document.getElementsByClassName("tag-button")
    for(let tagButton of tagButtons) {
        tagButton.addEventListener("click", filterTags)
    }

    const gradeButtons = document.getElementsByClassName("grade-button")
    for(let gradeButton of gradeButtons) {
        gradeButton.addEventListener("click", filterGrades)
    }

    function addToFilter({type=null, grade=null, tag=null}) {
    if(type) {
        filter["types"].add(type)
    }
    if(grade) {
        filter["grades"].add(grade)
    }
    if(tag) {
        filter["tags"].add(tag)
    }        
    update()
  }

  function removeFromFilter({type=null, grade=null, tag=null}){
    let key
    let removeValue
    if(type) {
      key = "types"
      removeValue = type
    }
    if(grade) {
      key = "grades"
      removeValue = grade
    }
    if(tag) {
     key = "tags"
     removeValue = tag
    }
    filter[key].delete(removeValue) 
    update()
  }

    function update(){
    if (filter["tags"].size === 0 && filter["types"].size === 0 && filter["grades"].size === 0) {
      document.getElementById("tags-filter").hidden = true
      document.getElementById("preview-container").hidden = true
      return
    } else {
      document.getElementById("tags-filter").hidden = false
      document.getElementById("preview-container").hidden = false
    }
    const tagButtons = document.querySelectorAll(".tag-button")
    const previewButtons = document.querySelectorAll(".preview")
    
    for(let tagButton of tagButtons) {
      let gradesOk = true
      let typeOk = true
      if(filter["grades"].size > 0) {
          if (filter["grades"].intersection(tagIndex[tagButton.dataset.tag]["grades"]).size == 0) {
            gradesOk = false
          }
      }
      if(filter["types"].size > 0) {
        if(filter["types"].intersection(tagIndex[tagButton.dataset.tag]["types"]).size == 0){
          typeOk = false
        }
      }
      if(gradesOk && typeOk) {
        tagButton.classList.add("show")
      } else {
        tagButton.classList.remove("show")
      }
    }

    for(let previewButton of previewButtons) {
      let tagsOk = true
      let gradesOk = true
      let typeOk = true
      
      if(filter["tags"].size > 0) {
          if (filter["tags"].intersection(previewIndex[previewButton.dataset.id]["tags"]).size == 0) {
            tagsOk = false
          }
      }
      if(filter["grades"].size > 0) {
          if (filter["grades"].intersection(previewIndex[previewButton.dataset.id]["grades"]).size == 0) {
            gradesOk = false
          }
      }
      
      if(filter["types"].size > 0) {
        if(filter["types"].intersection(previewIndex[previewButton.dataset.id]["type"]).size == 0){
          typeOk = false
        }
      }    
      if(gradesOk && typeOk && tagsOk) {
        previewButton.classList.add("show")
      } else {
        previewButton.classList.remove("show")
      }  
    }
    }

    update()

    function filterTags() {
    if (this.classList.contains("active")) {
      removeFromFilter({tag: this.dataset.tag})
    } else {
      addToFilter({tag: this.dataset.tag})
    }
    this.classList.toggle("active")
  }

  function filterProjects() {
    let type = this.dataset.type
    this.classList.toggle("active")
    let isActive = this.classList.contains("active")
    if(isActive) {
      addToFilter({type: type})
    } else {
      removeFromFilter({type: type})
    }
  }

  function filterGrades() {
    if (this.classList.contains("active")) {
      removeFromFilter({grade: this.dataset.grade})
    } else {
      addToFilter({grade: this.dataset.grade})
    }
    this.classList.toggle("active")
  }

 
</script>

<script id="menu-script">
  let reference = document.getElementsByTagName("title")[0].dataset.reference + "-link"
  for (let menuButton of document.getElementsByClassName("menu-button")){
    if (menuButton.id === reference) {
      menuButton.classList.toggle("active")
    } else if (menuButton.classList.contains("active")){
      menuButton.classList.toggle("active")
    }
  }
  const menuIcon = document.getElementById("menu-icon")
  menuIcon.addEventListener("click", menuIconClicked)

  function menuIconClicked() {
    document.getElementById("menu").classList.toggle("responsive")
    document.getElementById("project-title").classList.toggle("responsive")
  }
</script>



</html>
